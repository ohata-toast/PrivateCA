# 概要
**Management > Private CA > 概要**

Private CAは組織内部で使用する証明書を直接発行し管理できるサービスです。公認認証局を経由せずに安全に証明書を発行し、内部システム、APIサーバー、IoTデバイスなどに適用できます。

## 主な特徴

### 独自認証局(CA)運営
- Root CAとIntermediate CAを作成して証明書階層構造を構成できます。
- 組織のセキュリティポリシーに合わせて認証局を管理及び運営できます。
- 外部認証局に依存せず、独立して証明書を発行できます。

### 証明書自動発行及び更新
- 証明書テンプレートを使用して、同じ設定の証明書を迅速かつ一貫性を持って発行できます。
- ACME(automatic certificate management environment)プロトコルをサポートし、証明書の発行及び更新を自動化できます。
- Certbotなどの標準ACMEクライアントと互換性があります。

### 証明書失効管理
- CRL(certificate revocation list)を通じて失効した証明書リストを定期的に提供します。
- OCSP(online certificate status protocol)を通じて個別証明書の失効状態をリクエスト時点の状態で素早く確認できます。
- 証明書失効履歴を追跡し、監査できます。

### APIサポート
- RESTful APIを通じて証明書をプログラムで管理できます。
- 証明書ダウンロード、CRL照会、OCSPレスポンスなどの機能をAPIで提供します。
- 自動化システムと簡単に統合できます。

## サービス構成

Private CAサービスは次のようなコンポーネントで構成されています。

![Private CAサービス構造](https://static.toastoven.net/prod_privateca/2025-12-23_ko/NHN%20Cloud_PrivateCA_overview_ja_900.png)

### リポジトリ
- Private CAを管理する基本単位です。
- 発行者、証明書テンプレート、証明書、ACMEトークンなど、全てのリソースは特定のリポジトリに属します。
- CRL及びOCSP設定をリポジトリ単位で管理します。

### 発行者
- 証明書に署名し発行する認証局です。
- **Root CA**：最上位認証局で、自己署名された証明書です。全ての信頼の起点となります。
- **Intermediate CA**：Root CAによって署名された中間認証局です。実際のサーバー証明書発行に使用されます。

### 証明書テンプレート
- 証明書を迅速かつ一貫性を持って発行するための設定の集まりです。
- 同じ設定で複数の証明書を簡単に発行でき、次の2つの設定で構成されます。
    - **制限設定**：有効期間、SANオプションなど、証明書発行時の制限条件を定義します。
    - **共通反映設定**：鍵アルゴリズム、鍵使用用途、拡張鍵使用用途、主体情報など、証明書に共通して適用する設定を定義します。

### 証明書
- 発行者が署名した実際に使用可能な証明書です。
- サーバー認証、クライアント認証、コード署名など、様々な用途に使用できます。
- PEM形式でダウンロードしてシステムに適用できます。

### ACMEトークン
- ACMEプロトコルを通じた自動証明書発行に使用される認証情報です。
- CertbotなどのACMEクライアントと連携して証明書を自動的に発行及び更新できます。
- トークンIDとHMACキーを使用してACMEサーバーに認証します。

## 証明書発行フロー

Private CAで証明書を発行する基本フローは次のとおりです。

1. **リポジトリ作成**：証明書を管理するスペースを作成します。
2. **発行者作成**：Root CAまたはIntermediate CAを作成します。
3. **証明書テンプレート作成**：証明書発行に使用するテンプレートを作成します。
4. **証明書発行**：テンプレートを使用して実際の証明書を発行します。

発行された証明書はPEM形式でダウンロードしてWebサーバー、APIサーバー、アプリケーションなどに適用できます。

## 活用事例

### 内部システムセキュリティ強化
- 組織内部のWebサーバー、APIサーバー、データベースなどにTLS/SSL証明書を発行して通信を暗号化できます。
- 内部インフラに公認証明書を使用する必要がなく、費用を削減できます。

### マイクロサービス間認証
- マイクロサービスアーキテクチャでサービス間相互認証(mTLS)に使用する証明書を発行できます。
- サービスメッシュ(Service Mesh)環境で安全な通信を実装できます。

### IoTデバイス認証
- IoTデバイスに固有の証明書を発行してデバイス認証及び通信セキュリティを強化できます。
- 大量のデバイスに自動的に証明書を配布及び管理できます。

### 開発及びテスト環境
- 開発及びテスト環境で実際の運用環境と同じ証明書構造を再現できます。
- 安全なテスト環境を構築してセキュリティの脆弱性を事前に発見できます。

### コード署名及びドキュメント署名
- ソフトウェア配布時にコード署名証明書を発行してソフトウェアの整合性を保証できます。
- 電子文書にデジタル署名を適用して文書の真偽を確認できます。

## 始める

Private CAを初めて使用する場合は、次のガイドを参考にしてください。

- [コンソール利用ガイド](./console-guide.md)：Private CAコンソールでリポジトリ、発行者、証明書テンプレート、証明書を作成及び管理する方法を案内します。
- [ACMEを利用した証明書更新](./acme-guide.md)：Certbotを使用して証明書を自動的に発行及び更新する方法を案内します。
- [API v2.0ガイド](./api-guide-v2.0.md)：APIを通じて証明書をダウンロードし、CRL、OCSPを照会する方法を案内します。

!!! tip 「ポイント」
    - Private CAは組織内部用証明書の発行に最適化されています。公認証明書が必要な場合は、公認認証局を利用する必要があります。
    - 発行された証明書を使用するには、クライアントシステムにCAチェーンを信頼できる証明書として登録する必要があります。
    - ACMEプロトコルを使用すると、証明書の発行及び更新を完全に自動化でき、運用負担を大幅に軽減できます。

!!! danger "注意"
    - 証明書の失効は元に戻せない作業です。慎重に決定する必要があります。
    - CRL及びOCSPを有効化して、失効した証明書をクライアントが確認できるように設定する必要があります。
